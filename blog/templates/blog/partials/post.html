<div id="post-{{post.id}}" class="post item">
    <div class="preview" id="post-preview-{{post.id}}">
        {% include 'blog/preview.html' with post=post %}
    </div>
    <div class="detail" id="post-detail-{{ post.id }}" style="display: none;">
        {% include 'blog/detail.html' with post=post nested=True %}
    </div>

        <!-- Unique Comment Section for Each Post -->
    <div id="comment-section-{{ post.id }}">
        <button id="toggle-comments-{{ post.id }}" 
                class="toggle-comments" 
                data-post-id="{{ post.id }}">
            Comments ({{ post.comments_total|default:0 }})
        </button>
        <div id="comments-container-{{ post.id }}" 
            data-has-comments="{{ post.has_comments }}" 
            class="comments-container" style="display: none;">
            <div id="comments-list-{{ post.id }}">
                {% for comment in post.recent_comments %}
                    <div class="comment">
                        <strong>{{ comment.name|default:"Anonymous" }}</strong>: {{ comment.content }}
                        <p><em>{{ comment.created_on }}</em></p>
                    </div>
                {% endfor %}
            </div>

            <!-- Comment Form -->
            {% include 'blog/partials/comment_form.html' with post_id=post.id comment_form=comment_form %}
        </div>
    </div>
</div>
